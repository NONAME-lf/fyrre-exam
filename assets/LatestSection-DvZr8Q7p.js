import{r as n,g as m,j as s}from"./index-DyytaR27.js";import{S as g}from"./SectionHeader-P-9ar939.js";import{P as y}from"./PodcastCard--gkYlwFJ.js";import{A as d}from"./ArticleCard-ChlRJLgm.js";function w(e){const[i,l]=n.useState(null),[p,x]=n.useState([]);n.useEffect(()=>{e.type!=="magazine"&&e.type!=="author"||m().then(t=>{const a=t?.articles;l(a||null)})},[e]),n.useEffect(()=>{if(e.type!=="podcast")return;const t=u();if(t){l(t);return}m().then(a=>{let o=[];for(const r of a?.shows){if(!r.episodes)continue;const h=r.episodes.items.map((c,f)=>(c.authorId=r.id,c.epNum=r.episodes.items.length-f,c));o=o.concat(h)}l(o),localStorage.setItem("spotify_episodes",JSON.stringify(o))})},[]);function u(){const t=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o.startsWith("spotify_episode_")){const r=localStorage.getItem(o);r&&t.push(JSON.parse(r))}}return t}return s.jsxs("section",{className:"latest-section",children:[s.jsx(g,{title:e.type==="magazine"?"Latest Posts":e.type==="author"?`Articles by ${e.itemData?.name}`:"Latest Episodes",highlight:"SeeÂ ",text:"All",to:e.type==="magazine"?"/magazine":"/podcast"}),s.jsxs("ul",{className:"latest-items",children:[i&&e.type==="magazine"&&i.sort((t,a)=>new Date(a.date)-new Date(t.date)).slice(0,3).map(t=>s.jsx("li",{className:"latest-item",children:s.jsx(d,{article:t,orientation:"vertical"})},t.id)),i&&e.type==="author"&&i.sort((t,a)=>new Date(a.date)-new Date(t.date)).filter(t=>t.authorId===e.itemData?.id).slice(0,4).map(t=>s.jsx("li",{className:"latest-item",children:s.jsx(d,{article:t,orientation:"horizontal",noAuthor:!0,noText:!0,noCategory:!0})},t.id)),i&&e.type==="podcast"&&i&&i.sort((t,a)=>new Date(a.release_date)-new Date(t.release_date)).slice(0,3).map(t=>s.jsx("li",{className:"latest-item",children:s.jsx(y,{episode:t,episodeNum:t.epNum,border:"grid-border",orientation:e.orientation||""})},t.id))]})]})}export{w as default};
